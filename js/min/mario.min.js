(function(np){var KEY_B,KEY_LEFT,KEY_RIGHT,KEY_UP,KOTA_BITMAP,MARIO_BITMAP,MARIO_BITMAP_HEIGHT,MARIO_BITMAP_WIDTH,colorList,floor,isKey,keyboard;KEY_LEFT=37;KEY_UP=38;KEY_RIGHT=39;KEY_B=66;keyboard=[];isKey=function(key){return keyboard[key]};floor=window.innerHeight-50;MARIO_BITMAP_WIDTH=14;MARIO_BITMAP_HEIGHT=18;colorList=[[0,0,0,0],[220,41,0,255],[255,165,59,255],[32,32,32,255]];KOTA_BITMAP=[0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,1,1,1,1,1,1,1,1,1,1,0,0,0,1,1,1,1,1,1,1,1,1,1,1,0,0,1,1,1,1,1,1,1,1,1,1,1,1,0,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,2,2,2,2,1,1,1,1,1,1,1,1,1,1,2,1,1,2,1,1,2,2,2,2,1,1,1,1,2,2,2,2,2,2,2,1,1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,1,1,2,1,1,2,1,1,2,1,1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,1,1,2,1,1,1,2,2,1,1,1,2,1,1,1,1,2,1,1,1,1,1,1,1,1,2,1,1,1,1,2,3,3,3,2,2,3,3,3,2,1,1,1,1,1,1,3,1,1,1,1,3,1,1,1,1,1,1,1,3,1,1,1,1,1,1,3,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1];MARIO_BITMAP=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,3,3,3,2,2,3,2,0,0,0,0,0,0,3,2,3,2,2,2,3,2,2,2,0,0,0,0,3,2,3,3,2,2,2,3,2,2,2,0,0,0,3,3,2,2,2,2,3,3,3,3,0,0,0,0,0,0,2,2,2,2,2,2,2,0,0,0,0,0,0,3,3,1,3,3,3,0,0,0,0,0,0,0,3,3,3,1,3,3,1,3,3,3,0,0,0,3,3,3,3,1,3,3,1,3,3,3,3,0,0,2,2,3,1,2,1,1,2,1,3,2,2,0,0,2,2,2,1,1,1,1,1,1,2,2,2,0,0,2,2,1,1,1,1,1,1,1,1,2,2,0,0,0,0,1,1,1,0,0,1,1,1,0,0,0,0,0,3,3,3,0,0,0,0,3,3,3,0,0,0,3,3,3,3,0,0,0,0,3,3,3,3,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];return np.Mario=function(param){var eMario,jump,scale,setBitmap;param=param||{};scale=param.scale||2;eMario=document.createElement("canvas");eMario.width=MARIO_BITMAP_WIDTH*scale;eMario.height=MARIO_BITMAP_HEIGHT*scale;document.body.appendChild(eMario);eMario.style.position="fixed";eMario.style.left="950px";eMario.style.top="950px";eMario.style.margin="0";eMario.style.padding="0";eMario.style.zIndex="0";floor=window.innerHeight-50-eMario.height;setBitmap=function(){var color,colorIndex,context,i,imageData,tempCanvas,tempContext;tempCanvas=document.createElement("canvas");tempCanvas.width=MARIO_BITMAP_WIDTH;tempCanvas.height=MARIO_BITMAP_HEIGHT;tempContext=tempCanvas.getContext("2d");imageData=tempContext.createImageData(MARIO_BITMAP_WIDTH,MARIO_BITMAP_HEIGHT);i=0;while(i<MARIO_BITMAP_WIDTH*MARIO_BITMAP_HEIGHT){colorIndex=KOTA_BITMAP[i];color=colorList[colorIndex];imageData.data[i*4+0]=color[0];imageData.data[i*4+1]=color[1];imageData.data[i*4+2]=color[2];imageData.data[i*4+3]=color[3];++i}tempContext.putImageData(imageData,0,0);context=eMario.getContext("2d");return context.drawImage(tempCanvas,0,0,MARIO_BITMAP_WIDTH,MARIO_BITMAP_HEIGHT,0,0,eMario.width,eMario.height)};setBitmap();document.addEventListener("keydown",function(e){return keyboard[e.keyCode]=true});document.addEventListener("keyup",function(e){return keyboard[e.keyCode]=false});jump=0;setInterval(function(){var speed,x,y;x=Number(eMario.style.left.replace("px",""));speed=isKey(KEY_B)?2:1;if(isKey(KEY_LEFT)){x-=5*speed;eMario.style.webkitTransform="scaleX(-1)";eMario.style.MozTransform="scaleX(-1)"}if(isKey(KEY_RIGHT)){x+=5*speed;eMario.style.webkitTransform="scaleX( 1)";eMario.style.MozTransform="scaleX( 1)"}if(x<0){x=window.innerWidth}if(x>window.innerWidth){x=0}eMario.style.left=x+"px";y=Number(eMario.style.top.replace("px",""));if(y===floor&&isKey(KEY_UP)){jump=-16}jump+=.5;y+=jump;if(y>=floor){y=floor;jump=0}return eMario.style.top=y+"px"},1e3/30);return window.addEventListener("resize",function(){return floor=window.innerHeight-50-eMario.height})}})(window);window.addEventListener("load",function(){return Mario()},false);

